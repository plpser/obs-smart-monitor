"""
æµ‹è¯•"çœ‹"å­—å’Œæ•°å­—æ£€æµ‹åŠŸèƒ½
"""
import re

def _extract_number_with_kan(content):
    """
    æ£€æµ‹ç”¨æˆ·å‘è¨€å†…å®¹ä¸­æ˜¯å¦åŒæ—¶åŒ…å«"çœ‹"å­—å’Œæ•°å­—
    å¦‚æœæ»¡è¶³æ¡ä»¶ï¼Œè¿”å›æå–åˆ°çš„æ•°å­—ï¼›å¦åˆ™è¿”å›None
    
    :param content: ç”¨æˆ·å‘è¨€çš„çº¯å‡€å†…å®¹
    :return: æå–åˆ°çš„æ•°å­—å­—ç¬¦ä¸²æˆ–None
    """
    if not content or not content.strip():
        return None
    
    # æ£€æŸ¥æ˜¯å¦åŒ…å«"çœ‹"å­—
    if "çœ‹" not in content:
        return None
    
    # æå–æ‰€æœ‰æ•°å­—ï¼ˆåŒ…æ‹¬æ•´æ•°å’Œå°æ•°ï¼‰
    number_pattern = r'\d+(?:\.\d+)?'
    numbers = re.findall(number_pattern, content)
    
    if numbers:
        # å¦‚æœæœ‰å¤šä¸ªæ•°å­—ï¼Œè¿”å›ç¬¬ä¸€ä¸ª
        return numbers[0]
    
    return None

def test_number_detection():
    """æµ‹è¯•æ•°å­—æ£€æµ‹åŠŸèƒ½"""
    
    # æµ‹è¯•ç”¨ä¾‹
    test_cases = [
        "çœ‹123å·æˆ¿é—´",           # åº”è¯¥è¿”å› "123"
        "çœ‹æˆ¿é—´456",             # åº”è¯¥è¿”å› "456"
        "æˆ‘æƒ³çœ‹7.5ä¸ªå°æ—¶",        # åº”è¯¥è¿”å› "7.5"
        "çœ‹çœ‹è¿™ä¸ª",               # åº”è¯¥è¿”å› Noneï¼ˆæ²¡æœ‰æ•°å­—ï¼‰
        "æˆ¿é—´123å¾ˆå¥½",            # åº”è¯¥è¿”å› Noneï¼ˆæ²¡æœ‰"çœ‹"å­—ï¼‰
        "çœ‹æˆ¿é—´88å’Œ99",           # åº”è¯¥è¿”å› "88"ï¼ˆç¬¬ä¸€ä¸ªæ•°å­—ï¼‰
        "çœ‹12.34å’Œ56.78",        # åº”è¯¥è¿”å› "12.34"
        "",                      # åº”è¯¥è¿”å› Noneï¼ˆç©ºå†…å®¹ï¼‰
        "çœ‹",                     # åº”è¯¥è¿”å› Noneï¼ˆåªæœ‰"çœ‹"å­—ï¼‰
        "çœ‹0å·",                  # åº”è¯¥è¿”å› "0"
        "çœ‹100.0æˆ¿é—´",            # åº”è¯¥è¿”å› "100.0"
        "æƒ³çœ‹çœ‹ç”µå½±",              # åº”è¯¥è¿”å› Noneï¼ˆæ²¡æœ‰æ•°å­—ï¼‰
        "çœ‹ç¬¬1é›†",                # åº”è¯¥è¿”å› "1"
    ]
    
    print("ğŸ”¢ â€œçœ‹â€å­—å’Œæ•°å­—æ£€æµ‹åŠŸèƒ½æµ‹è¯•")
    print("=" * 60)
    
    for i, test_case in enumerate(test_cases, 1):
        result = _extract_number_with_kan(test_case)
        
        # åˆ¤æ–­æµ‹è¯•ç»“æœçŠ¶æ€
        if result is not None:
            status = "âœ… æ£€æµ‹åˆ°"
            status_detail = f"æ•°å­—: {result}"
        else:
            status = "âŒ æœªæ£€æµ‹åˆ°"
            status_detail = "æ— åŒ¹é…ç»“æœ"
        
        print(f"\næµ‹è¯•ç”¨ä¾‹ {i}:")
        print(f"   ğŸ“ è¾“å…¥å†…å®¹: '{test_case}'")
        print(f"   {status} {status_detail}")
        print("   " + "-" * 45)
    
    # ç»Ÿè®¡æµ‹è¯•ç»“æœ
    positive_cases = ["çœ‹123å·æˆ¿é—´", "çœ‹æˆ¿é—´456", "æˆ‘æƒ³çœ‹7.5ä¸ªå°æ—¶", "çœ‹æˆ¿é—´88å’Œ99", "çœ‹12.34å’Œ56.78", "çœ‹0å·", "çœ‹100.0æˆ¿é—´", "çœ‹ç¬¬1é›†"]
    negative_cases = ["çœ‹çœ‹è¿™ä¸ª", "æˆ¿é—´123å¾ˆå¥½", "", "çœ‹", "æƒ³çœ‹çœ‹ç”µå½±"]
    
    print(f"\nğŸ“Š æµ‹è¯•ç»Ÿè®¡:")
    print(f"   é¢„æœŸæœ‰æ•°å­—çš„ç”¨ä¾‹: {len(positive_cases)} ä¸ª")
    print(f"   é¢„æœŸæ— æ•°å­—çš„ç”¨ä¾‹: {len(negative_cases)} ä¸ª")
    print(f"   æ€»æµ‹è¯•ç”¨ä¾‹: {len(test_cases)} ä¸ª")

if __name__ == "__main__":
    test_number_detection()